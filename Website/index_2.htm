<html>
<head>
<meta charset="utf-8">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">


var nesne1;
var nesne2;
if(navigator.appName.search('Microsoft')>-1) { 
  nesne1 = new ActiveXObject('MSXML2.XMLHTTP');
  nesne2 = new ActiveXObject('MSXML2.XMLHTTP');
   }
else { 
nesne1 = new XMLHttpRequest();
nesne2 = new XMLHttpRequest();
}

var myVar = setInterval(yolla, 3000)
function yolla() {
nesne1.open('get', 'Station1_Current.txt', true); 
nesne2.open('get', 'Station2_Current.txt', true); 
nesne1.onreadystatechange = cevap;
nesne2.onreadystatechange = cevap;
nesne1.send(null);
nesne2.send(null);
}

var myVar2 = setInterval(cevap, 3000);
function cevap() {
if(nesne1.readyState==4) {
var co2_1 = document.getElementById('CO2_1');
var pm1_1 = document.getElementById('PM1_1');
var pm25_1 = document.getElementById('PM25_1');
var pm10_1 = document.getElementById('PM10_1');
var tempf_1 = document.getElementById('tempf_1');
var hum_1 = document.getElementById('hum_1');
var h2s_1 = document.getElementById('h2s_1');
var c7h8_1 = document.getElementByID('c7h8_1');
var c2h5oh_1 = document.getElementById('c2h5oh_1');
//el.innerHTML = nesne.responseText;
//var lines = el.innerHTML.split("\n");
//var dog = document.getElementById('result');
//dog.innerHTML = lines[lines.length-1];
var original = nesne1.responseText;
var lines = original.split("\n");
var lastLine = lines[lines.length-1];
let separated = lastLine.split(',');
co2_1.innerHTML = separated[1];
pm1_1.innerHTML = separated[2];
pm25_1.innerHTML = separated[3];
pm10_1.innerHTML = separated[4];
tempf_1.innerHTML = separated[5];
hum_1.innerHTML = separated[6];
h2s_1.innerHTML = separated[7];
c7h8_1.innerHTML = separated[8];
c2h5oh_1.innerHTML = separated[9];

//if (co2.innerHTML < 200) {
//	co2.style.backgroundColor = '#FF0000';
//}
//else {
//	co2.style.backgroundColor = '#00FF00';
//}

}

if(nesne2.readyState==4) {
var co2_2 = document.getElementById('CO2_2');
var pm1_2 = document.getElementById('PM1_2');
var pm25_2 = document.getElementById('PM25_2');
var pm10_2 = document.getElementById('PM10_2');
var tempf_2 = document.getElementById('tempf_2');
var hum_2 = document.getElementById('hum_2');
var h2s_2 = document.getElementById('h2s_2');
var c7h8_2 = document.getElementByID('c7h8_2');
var c2h5oh_2 = document.getElementById('c2h5oh_2');
//el.innerHTML = nesne.responseText;
//var lines = el.innerHTML.split("\n");
//var dog = document.getElementById('result');
//dog.innerHTML = lines[lines.length-1];
var original_2 = nesne2.responseText;
var lines_2 = original_2.split("\n");
var lastLine_2 = lines_2[lines_2.length-1];
let separated_2 = lastLine_2.split(',');
co2_2.innerHTML = separated_2[1];
pm1_2.innerHTML = separated_2[2];
pm25_2.innerHTML = separated_2[3];
pm10_2.innerHTML = separated_2[4];
tempf_2.innerHTML = separated_2[5];
hum_2.innerHTML = separated_2[6];
h2s_2.innerHTML = separated_2[7];
c7h8_2.innerHTML = separated_2[8];
c2h5oh_2.innerHTML = separated_2[9];

//if (co2.innerHTML < 200) {
//  co2.style.backgroundColor = '#FF0000';
//}
//else {
//  co2.style.backgroundColor = '#00FF00';
//}

}
else {
  var co2_1 = document.getElementById('CO2_1');
  co2_1.innerHTML = 1;
}
}


var auto_refresh = setInterval(
function ()
{
$('#load_data').load(cevap(response)).fadeIn("slow");
}, 10000); // refresh every 10000 milliseconds



</script>
</head>
<body style ="background-color:#B3A369"></body>
<script>
yolla()
</script>

<table center ="center">
  <tr>
    <th>Pollutant</th>
    <th>Station 1 Concentration</th>
    <th>Station 2 Concentration</th>
  </tr>
  <tr>
  	<td>Carbon Dioxide</td>
    <td><div id="CO2_1"></div></td>
    <td><div id="CO2_2"></div></td>
  </tr>
  <tr>
  	<td>PM1.0</td>
    <td><div id="PM1_1"></div></td>
    <td><div id="PM1_2"></div></td>
  </tr>
  <tr>
  	<td>PM2.5</td>
    <td><div id="PM25_1"></div></td>
    <td><div id="PM25_2"></div></td>
  </tr>
  <tr>
  	<td>PM10</td>
    <td><div id="PM10_1"></div></td>
    <td><div id="PM10_2"></div></td>
  </tr>
    <tr>
  	<td>tempf</td>
    <td><div id="tempf_1"></div></td>
    <td><div id="tempf_1"></div></td>
  </tr>
    <tr>
  	<td>thum</td>
    <td><div id="hum_1"></div></td>
    <td><div id="hum_2"></div></td>
  </tr>
    <tr>
  	<td>h2s</td>
    <td><div id="h2s_1"></div></td>
    <td><div id="h2s_2"></div></td>
  </tr>
  <tr>
    <td>c7h8</td>
    <td><div id="c7h8_1"></div></td>
    <td><div id="c7h8_2"></div></td>
  </tr>
  <tr>
    <td>c2h5oh</td>
    <td><div id="c2h5oh_1"></div></td>
    <td><div id="c2h5oh_2"></div></td>
  </tr>
</table>
</body>
</html>